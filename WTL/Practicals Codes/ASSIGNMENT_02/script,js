// FIND US PAGE ONLY
document.addEventListener("DOMContentLoaded", () => {
  const mapEl = document.getElementById("map");
  if (!mapEl) return;

  // Default bakery location (Pune example)
  const bakeryLatLng = [18.5204, 73.8567];

  const map = L.map("map").setView(bakeryLatLng, 13);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  const marker = L.marker(bakeryLatLng).addTo(map);
  marker.bindPopup("<b>SweetBite Bakery</b><br/>Freshly baked everyday âœ¨").openPopup();

  let radiusMeters = 2000;

  let circle = L.circle(bakeryLatLng, {
    radius: radiusMeters
  }).addTo(map);

  const range = document.getElementById("radiusRange");
  const label = document.getElementById("radiusLabel");

  function updateRadius(valKm){
    const km = Number(valKm);
    radiusMeters = km * 1000;

    label.textContent = km + " km";
    circle.setRadius(radiusMeters);

    // zoom nicely depending on radius
    map.fitBounds(circle.getBounds(), { padding: [30, 30] });
  }

  // default
  updateRadius(range.value);

  range.addEventListener("input", (e) => updateRadius(e.target.value));
});
